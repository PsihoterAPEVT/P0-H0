<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SWILL ‚Ä¢ ADMIN</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <div class="logo">‚ö° SWILL ADMIN</div>
        <a href="{{ url_for('logout') }}" class="btn-header">üö™ –í–´–ô–¢–ò</a>
    </header>

    <div class="admin-container">
        <h1 style="font-size: 36px; margin-bottom: 40px;">–ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø</h1>
        
        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value">{{ videos|length }}</div>
                <div>–í–ò–î–ï–û</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ total_earned }} ‚ÇΩ</div>
                <div>–°–û–ë–†–ê–ù–û</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ donations|length }}</div>
                <div>–î–û–ù–ê–¢–û–í</div>
            </div>
        </div>
        
        <!-- –§–õ–ï–® –°–û–û–ë–©–ï–ù–ò–Ø -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        <!-- –§–û–†–ú–ê –ó–ê–ì–†–£–ó–ö–ò -->
        <div class="upload-form">
            <h2 style="margin-bottom: 30px;">üì§ –ó–ê–ì–†–£–ó–ò–¢–¨ –í–ò–î–ï–û</h2>
            <form method="POST" action="{{ url_for('upload_video') }}" enctype="multipart/form-data">
                <div class="form-group">
                    <label>–ù–ê–ó–í–ê–ù–ò–ï</label>
                    <input type="text" name="title" required>
                </div>
                <div class="form-group">
                    <label>–û–ü–ò–°–ê–ù–ò–ï</label>
                    <textarea name="description" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label>–í–ò–î–ï–û –§–ê–ô–õ (MP4)</label>
                    <input type="file" name="video" accept="video/*" required>
                </div>
                <div class="form-group">
                    <label>–ü–†–ï–í–¨–Æ (JPG/PNG)</label>
                    <input type="file" name="thumbnail" accept="image/*" required>
                </div>
                <button type="submit" class="btn">üöÄ –ó–ê–ì–†–£–ó–ò–¢–¨</button>
            </form>
        </div>
        
        <!-- –°–ü–ò–°–û–ö –í–ò–î–ï–û -->
        <h2 style="margin: 40px 0 20px;">üìã –í–ê–®–ò –í–ò–î–ï–û</h2>
        <div style="background: #14141f; border-radius: 20px; overflow: hidden;">
            {% for video in videos %}
            <div style="display: grid; grid-template-columns: 80px 1fr 100px 100px; align-items: center; padding: 15px; border-bottom: 1px solid #2d2d3f;">
                <div>#{{ video.id }}</div>
                <div>{{ video.title }}</div>
                <div>{{ video.views }} üëÅÔ∏è</div>
                <div>
                    <a href="{{ url_for('delete_video', video_id=video.id) }}" style="color: #ef4444; text-decoration: none;" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ?')">‚ùå</a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- –ò–°–¢–û–†–ò–Ø –î–û–ù–ê–¢–û–í -->
        <h2 style="margin: 40px 0 20px;">üí∞ –ü–û–°–õ–ï–î–ù–ò–ï –î–û–ù–ê–¢–´</h2>
        <div style="background: #14141f; border-radius: 20px; overflow: hidden;">
            {% for don in donations %}
            <div style="display: grid; grid-template-columns: 100px 100px 1fr; padding: 15px; border-bottom: 1px solid #2d2d3f;">
                <div>{{ don.amount }} ‚ÇΩ</div>
                <div style="color: {% if don.status == 'success' %}#4ade80{% else %}#fbbf24{% endif %}">{{ don.status }}</div>
                <div>{{ don.created_at.strftime('%d.%m.%Y %H:%M') }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>